(window["webpackJsonpmbase2modules"] = window["webpackJsonpmbase2modules"] || []).push([[81],{

/***/ 78:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _app_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _libs_exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);



const t = _app_globals__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"].t;

/* harmony default export */ __webpack_exports__["default"] = (async ($content) => {
    const module = await __webpack_require__.e(/* import() */ 0).then(__webpack_require__.bind(null, 9));
    const mutils = await _libs_exports__WEBPACK_IMPORTED_MODULE_1__["mutils"]();
    const utils = await _libs_exports__WEBPACK_IMPORTED_MODULE_1__["utils"]();

    const tableAttributesOverride = [
        mutils.createVariableDefinition('lov_ime', null, 'text', null),
        mutils.createVariableDefinition('luo_ime', null, 'text', null),
        mutils.createVariableDefinition('_local_name', null, 'text', null),
        mutils.createVariableDefinition('_cnt_permanent_spot_code', null, 'text', null),
        mutils.createVariableDefinition('_coordinates_x_y', null, 'text', null)
    ];
        
    
    module.default({
        $parent: $content,
        key_id: 'cnt_permanent_spots',
        view: 'cnt_view_permanent_spots',
        title: t`Stalna Å¡tevna mesta`,
        skipVariables: ['_location'],
        tableRecordsOptions: {
            tableAttributesOverride: tableAttributesOverride,
            skipId: true,
            processTableData: (row, inx) => {
                
                const data = utils.jsonParse(row._location_data);
                if (data) {
                    const _location = data;

                    if (_location.lat && _location.lon) {
                        row._location = {
                            lat: _location.lat,
                            lon: _location.lon
                        }
                        let res = proj4(_app_globals__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"].proj4defs['3912'], [ _location.lon, _location.lat].map(c => parseFloat(c)));
                        if (res && Array.isArray(res)) {
                            res = res.map(r => Math.round(r));
                            row['_coordinates_x_y'] = `(${res[0]}, ${res[1]})`
                        }
                    }
                    
                    if (_location.spatial_request_result) {
                        const srr = _location.spatial_request_result;
                        row.luo_ime = srr.luo_ime;
                        row.lov_ime = srr.lov_ime;
                    }
                }

                return row;
            }
        },
        additionaComponentOptions: {    //tell the location component to fetch spatial unit data
            _location_data: {
                    defaultSpatialRequest: {
                        apiRoot: _app_globals__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"].apiRoot
                    }
            }
        }
    });

});

/***/ })

}]);