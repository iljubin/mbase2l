(window["webpackJsonpmbase2modules"] = window["webpackJsonpmbase2modules"] || []).push([[90],{

/***/ 132:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _libs_exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var _app_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);




const InterventionMeasures = function(op={}) {
    const $el = $('<div/>');
    this.$el = () => $el;

    this.op = op;
    
    const $selectDiv = $('<div/>', {style: 'width: 100%'});
    const $selectWithSpecifyDiv = $('<div/>', {style: 'width: 100%'});

    $el.append($selectDiv);
    $el.append($selectWithSpecifyDiv);

    const selectOptions = Object.assign({}, op);

    this.fixedOptions = ["No intervention needed", "Phone-call conversation"];

    selectOptions.multiple = false;
    selectOptions.data = selectOptions.data.filter(d => this.fixedOptions.indexOf(d[2])!==-1);
    this.fixedCodes = selectOptions.data.map(d => d[0]);
    selectOptions.data.push([-1, _app_globals__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"].t`Ukrepi na terenu`, "Ukrepi na terenu"]);

    selectOptions.onSelect = () => {
        if (!this.select) return;

        const value = this.select.val();

        if (!value) return;

        if (this.fixedCodes.findIndex(c => c==value) === -1) {
            this.selectWithSpecify.$el().show();
        }
        else {
            this.selectWithSpecify.$el().hide();
        }

        op.onSelect && op.onSelect(value);
    }

    this.select = new op.imports.Select2.default(selectOptions);

    const selectWithSpecifyOptions = Object.assign({}, op);
    
    selectWithSpecifyOptions.imports = op.imports.SelectWithSpecify.imports;

    selectWithSpecifyOptions.label = _app_globals__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"].t`Ukrepi na terenu`;

    selectWithSpecifyOptions.data = selectWithSpecifyOptions.data.filter(d => this.fixedOptions.indexOf(d[2])===-1);
    
    this.selectWithSpecify = new op.imports.SelectWithSpecify.default(selectWithSpecifyOptions);

    this.selectWithSpecify.$el().hide();

    $selectDiv.html(this.select.$el());
    $selectWithSpecifyDiv.html(this.selectWithSpecify.$el());
}

InterventionMeasures.prototype.val = function (value) {
    if (value!==undefined) {
        if (Array.isArray(value) && value.length===1) {
            if (this.fixedCodes.findIndex(c => c == value[0])!==-1) {
                this.select.val(value[0]);
            }
            else {
                this.select.val(-1);
            }
        }
        else {
            this.select.val(-1);
        }
        
        this.selectWithSpecify.val(value);
        return;
    }

    const selectedFixedValue = this.select.val();

    if (selectedFixedValue == -1) {
        return this.selectWithSpecify.val();
    }
    else {
        return [selectedFixedValue];
    }
}

InterventionMeasures.imports = async function () {
    const [
        _Select2,
        _SelectWithSpecify
    ] = await Promise.all([
        Object(_libs_exports__WEBPACK_IMPORTED_MODULE_0__["Select2"])(),
        Object(_libs_exports__WEBPACK_IMPORTED_MODULE_0__["SelectWithSpecify"])()
    ]);


    _SelectWithSpecify.imports = await _SelectWithSpecify.default.imports();

    return {
        Select2: _Select2, 
        SelectWithSpecify: _SelectWithSpecify
    };
}

/* harmony default export */ __webpack_exports__["default"] = (InterventionMeasures);

/***/ })

}]);